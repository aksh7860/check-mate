<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Checkmate ‚ù§Ô∏è</title>

<style>
* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: "Segoe UI", system-ui, sans-serif;
  background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
  color: white;
  overflow-x: hidden;
}

/* SAKURA */

.sakura {
  position: fixed;
  top: -20px;
  font-size: 18px;
  opacity: 0.8;
  animation: fall linear forwards;
  z-index: 1;
  pointer-events: none;
}

@keyframes fall {
  to {
    transform: translateY(110vh) rotate(360deg);
    opacity: 0.2;
  }
}

/* MAIN */

#mainContent {
  position: relative;
  z-index: 5;
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: opacity 1.2s ease;
}

#mainContent.fadeOut { opacity: 0; }

.container {
  max-width: 900px;
  padding: 24px;
  text-align: center;
}

.card {
  background: rgba(255,255,255,0.08);
  border-radius: 20px;
  padding: 24px;
  margin: 20px 0;
}

input {
  width: 100%;
  padding: 12px;
  border-radius: 10px;
  border: none;
  margin: 8px 0 14px;
  font-size: 16px;
}

/* CHESS */

.board {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 14px;
  max-width: 360px;
  margin: 20px auto;
}

.square {
  padding: 18px;
  border-radius: 16px;
  background: #f5f5f5;
  color: #222;
  cursor: pointer;
}

.square.active { outline: 3px solid #ff4d6d; }
.piece { font-size: 36px; }
.allowed { border: 3px solid #ff4d6d; }

#chessMsg {
  min-height: 32px;
  margin-top: 14px;
  opacity: 0;
  transform: translateY(8px);
  transition: 0.4s ease;
}

#chessMsg.show {
  opacity: 1;
  transform: translateY(0);
}

/* BUTTONS */

.buttons { position: relative; height: 120px; }

button {
  padding: 14px 28px;
  font-size: 18px;
  border-radius: 999px;
  border: none;
  cursor: pointer;
}

#yesBtn { background: #ff4d6d; color: white; }

#noBtn {
  position: absolute;
  left: 50%;
  top: 60px;
  background: #555;
  color: white;
}

#noText { margin-top: 12px; opacity: 0; transition: 0.3s; }

/* CHECKMATE */

#checkmateOverlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.85);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 64px;
  opacity: 0;
  pointer-events: none;
  transition: 0.5s ease;
  z-index: 50;
}

#checkmateOverlay.show { opacity: 1; }

/* JAPAN SCENE */

#japanScene {
  position: fixed;
  inset: 0;
  opacity: 0;
  transition: 2s ease;
  z-index: 40;
  pointer-events: none;
}

#japanScene.show {
  opacity: 1;
  pointer-events: auto;
}

#japanScene video {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.sceneOverlay {
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0.45);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.photos {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  gap: 12px;
  max-width: 600px;
}

.photos img { width: 100%; border-radius: 16px; }

#finalLine {
  margin-top: 24px;
  font-size: 18px;
  opacity: 0;
  transition: 2s ease;
}
</style>
</head>

<body>

<div id="checkmateOverlay">‚ôõ CHECKMATE ‚ôõ</div>

<audio id="valentineMusic" src="ekdin.mp3"></audio>

<div id="mainContent">
<div class="container">

<div id="lockScreen" class="card">
  <h2>üîê Just one last thing‚Ä¶.</h2>

  <label>What is the name I call you by?</label>
  <input id="q1" />

  <label>My date of birth (day only)</label>
  <input id="q2" />

  <label>What is my dream destination?</label>
  <input id="q3" />

  <button onclick="unlock()" style="background:#ff4d6d;color:white;width:100%">
    Unlock üíñ
  </button>
  <p id="error"></p>
</div>

<div id="protectedContent" style="display:none;">
<h1>Choose your opening move ‚ôüÔ∏è</h1>

<div class="card">
<div class="board">
<div class="square allowed" data-msg="My bravest move, always leading my heart üí´"><div class="piece">‚ôû</div></div>
<div class="square allowed" data-msg="Every small step with you feels like forever ü§ç"><div class="piece">‚ôüÔ∏è</div></div>
<div class="square" data-msg="Strong and steady ‚Äî but let‚Äôs save this for later üñ§"><div class="piece">‚ôú</div></div>
<div class="square" data-msg="Different paths, same destiny‚Ä¶ just not yet ‚ú®"><div class="piece">‚ôù</div></div>
<div class="square" data-msg="Too powerful ‚Äî like how much I love you üòå"><div class="piece">‚ôõ</div></div>
<div class="square" data-msg="I guard my heart‚Ä¶ because it‚Äôs yours ‚ù§Ô∏è"><div class="piece">‚ôö</div></div>
</div>
<p id="chessMsg"></p>
</div>

<div class="card">
<h2>Will you be my Valentine?</h2>
<div class="buttons">
  <button id="yesBtn">Yes üíñ</button>
  <button id="noBtn">No üôà</button>
</div>
<p id="noText">That doesn‚Äôt feel right‚Ä¶ my heart already knows your move ü§ç</p>
</div>
</div>
</div>
</div>

<div id="japanScene">
<video autoplay muted loop playsinline>
  <source src="japan.mp4" type="video/mp4">
</video>
<div class="sceneOverlay">
  <p id="finalLine">From the first move‚Ä¶ it was always you.</p>
</div>
</div>

<script>

/* SAKURA */

function createPetal() {
  const petal = document.createElement("div");
  petal.className = "sakura";
  petal.textContent = "üå∏";

  petal.style.left = Math.random() * 100 + "vw";
  petal.style.animationDuration = 5 + Math.random() * 5 + "s";

  document.body.appendChild(petal);
  setTimeout(() => petal.remove(), 9000);
}
setInterval(createPetal, 400);

/* LOCK */

const q1 = document.getElementById("q1");
const q2 = document.getElementById("q2");
const q3 = document.getElementById("q3");
const lockScreen = document.getElementById("lockScreen");
const protectedContent = document.getElementById("protectedContent");
const error = document.getElementById("error");

const answers = { q1:"bunny", q2:"28", q3:"prague" };

function unlock() {
  if (
    q1.value.trim().toLowerCase() === answers.q1 &&
    q2.value.trim() === answers.q2 &&
    q3.value.trim().toLowerCase() === answers.q3
  ) {
    lockScreen.style.display = "none";
    protectedContent.style.display = "block";
    error.textContent = "";
  } else {
    error.textContent = "Hmm‚Ä¶ try again üòå";
  }
}

/* CHESS */

const chessMsg = document.getElementById("chessMsg");
let openingPlayed = false;

document.querySelectorAll(".square").forEach(square => {
  square.onclick = () => {

    document.querySelectorAll(".square")
      .forEach(s => s.classList.remove("active"));
    square.classList.add("active");

    chessMsg.classList.remove("show");

    setTimeout(() => {

      if (!openingPlayed) {
        if (square.classList.contains("allowed")) {
          openingPlayed = true;
          chessMsg.textContent =
            square.dataset.msg +
            " ‚Äî and just like that, everything opens up ‚ôüÔ∏èüíñ";
        } else {
          chessMsg.textContent =
            "Are you sure? In chess, this isn‚Äôt how openings begin ‚ôüÔ∏è";
        }
      } else {
        chessMsg.textContent = square.dataset.msg;
      }

      chessMsg.classList.add("show");

    }, 120);
  };
});

/* BUTTONS */

const noBtn = document.getElementById("noBtn");
const noText = document.getElementById("noText");
const yesBtn = document.getElementById("yesBtn");
const valentineMusic = document.getElementById("valentineMusic");
const checkmateOverlay = document.getElementById("checkmateOverlay");
const mainContent = document.getElementById("mainContent");
const japanScene = document.getElementById("japanScene");
const finalLine = document.getElementById("finalLine");

noBtn.onmouseenter = () => {
  noText.style.opacity = 1;
  noBtn.style.transform =
    `translate(${Math.random()*200-100}px,0)`;
};

yesBtn.onclick = () => {

  noBtn.remove();
  noText.remove();

  valentineMusic.play();
  checkmateOverlay.classList.add("show");

  setTimeout(() => {

    checkmateOverlay.classList.remove("show");
    mainContent.classList.add("fadeOut");

    setTimeout(() => {
      mainContent.style.display = "none";
      japanScene.classList.add("show");

      setTimeout(() => {
        finalLine.style.opacity = 1;
      }, 1500);

    }, 1200);

  }, 1200);
};

</script>
</body>
</html>
